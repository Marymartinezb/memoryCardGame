"use strict";var images=[{src:"berengena.png",gameId:1},{src:"mario.png",gameId:2},{src:"luigui.png",gameId:3},{src:"zanahoria.png",gameId:4},{src:"honguito.png",gameId:5},{src:"cherry.png",gameId:6},{src:"pacman.png",gameId:7},{src:"pacwoman.png",gameId:8},{src:"ghost1.png",gameId:9},{src:"ghost2.png",gameId:10}],bgImages=images.concat(images),cardContainer=document.getElementById("cardContainer"),cards=cardContainer.children,yourScore=document.getElementById("yourScore"),finalScore=document.getElementById("bestScore"),score=0,cardsLog=[],clikedCounter=0,clickedCards=[],stopClick=!1,pushToLog=!1,success=!1,successPair=0,randomObj=bgImages.sort(function(){return.5-Math.random()}),turnCard=function(e){setTimeout(function(){e.style.backgroundImage="none",e.classList.remove("front"),stopClick=!1,clikedCounter=0},1500)},setImage=function(e,r){e.classList.add("front"),e.style.backgroundImage='url("../img/'+randomObj[r].src},verifingCard=function(){void 0!==clickedCards[1]&&clickedCards[0].gameId===clickedCards[1].gameId?(success=!0,score+=100,yourScore.innerHTML=score,clickedCards.forEach(function(e){e.node.classList.add("hidden")}),clickedCards=[],clikedCounter=0,successPair+=1):2===clikedCounter&&(success=!1,clickedCards.forEach(function(e){turnCard(e.node)}),clickedCards=[])},verifiedCardLog=function(e){cardsLog.length?(cardsLog.forEach(function(r){if(r!==e||success)pushToLog=!0;else{score-=50,yourScore.innerHTML=score;var c=cardsLog.indexOf(r);cardsLog.splice(c,1)}}),pushToLog&&(cardsLog.push(e),pushToLog=!1)):cardsLog.push(e)},clikedCard=function(e,r){e.addEventListener("click",function(){return!stopClick&&(clikedCounter+=1,clickedCards.push({node:e,gameId:randomObj[r].gameId}),void 0!==clickedCards[1]&&clickedCards[0].node.id===clickedCards[1].node.id?(alert("Por favor haga click sobre otra carta"),turnCard(clickedCards[1].node),clickedCards=[],!0):(setImage(e,r),verifingCard(),verifiedCardLog(e.id),clikedCounter>=2&&(stopClick=!0),10===successPair&&(console.log("score",score),localStorage.setItem("finalStore",score),alert("Usted ha ganado por favor haga click en REINICIAR")),!0))})},init=function(){for(var e=0;e<cards.length;e+=1){var r=cards[e].id,c=document.getElementById(r);setImage(c,e),turnCard(c),clikedCard(c,e)}};init(),finalScore.innerHTML=localStorage.getItem("finalStore"),"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js").then(function(e){console.log("SW registered: ",e)}).catch(function(e){console.log("SW registration failed: ",e)})});